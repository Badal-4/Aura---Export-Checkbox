public without sharing class CustomerCommunity_ReportModuleController
{
    public static Id userId = UserInfo.getUserId();
    public static Id portalContactId = [Select ContactId from User where Id =: userId].ContactId;
    @auraEnabled(cacheable=true)
    public static List<AccniteReports__c> getReportList()
    {
        
        return [Select Id,Name,Description__c,Category__c,CreatedOn__c,LastAccessed__c,Subscribed__c,Favourite__c from AccniteReports__c
        where Contact__c =: portalContactId];
        
    }   

    @auraEnabled()
    public static void updateFavCheckbox(String recordId)
    {
        List<AccniteReports__c> reportList = [Select Id,Favourite__c from AccniteReports__c where Id =: recordId];
        List<AccniteReports__c> listToUpdate = new List<AccniteReports__c>();

        if(!reportList.isEmpty())
        {
            for(AccniteReports__c acc : reportList)
            {
                if(acc.Favourite__c == false || acc.Favourite__c == null)
                {
                    acc.Favourite__c = true;
                    listToUpdate.add(acc);
                }
            }
        }
        update listToUpdate;
    }

    @auraEnabled(cacheable=true)
    public static List<AccniteReports__c> getFavouriteReportList()
    {
        
        return [Select Id,Name,Description__c,Category__c,CreatedOn__c,LastAccessed__c,Subscribed__c,Favourite__c from AccniteReports__c where Favourite__c = true and Contact__c =: portalContactId];
        
    }  

    @auraEnabled()
    public static void updateSubCheckbox(String recordId)
    {
        List<AccniteReports__c> reportList = [Select Id,Subscribed__c from AccniteReports__c where Id =: recordId];
        List<AccniteReports__c> listToUpdate = new List<AccniteReports__c>();

        if(!reportList.isEmpty())
        {
            for(AccniteReports__c acc : reportList)
            {
                if(acc.Subscribed__c == false || acc.Subscribed__c == null )
                {
                    acc.Subscribed__c = true;
                    listToUpdate.add(acc);
                }
            }
        }
        update listToUpdate;
    }

  

}
